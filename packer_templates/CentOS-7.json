{
"variables": {
"iso_url": "put_files_here/CentOS-7-x86_64-Minimal-1908.iso",
"iso_checksum_type": "sha256",
"iso_checksum": "9a2c47d97b9975452f7d582264e9fc16d108ed8252ac6816239a3b58cef5c53d",
"ssh_username": "root",
"ssh_password": "{{env `rootpw`}}",
"hostname": "",
"dnsuffix":"{{env `USERDNSDOMAIN`}}",
"proxy":"{{env `http_proxy`}}"
},

"builders": [
{
  "type": "vmware-iso",
  "vm_name": "{{ user `hostname` }}",
  "iso_url": "{{ user `iso_url` }}",
  "iso_checksum": "{{ user `iso_checksum` }}",
  "iso_checksum_type": "{{ user `iso_checksum_type` }}",
  "guest_os_type": "centos7-64",
  "ssh_username": "{{ user `ssh_username` }}",
  "ssh_password": "{{ user `ssh_password` }}",
  "ssh_timeout": "120m",
  "floppy_files": [
          "kickstart/centos7/ks.cfg"
        ],
  "boot_command": [
  "<up><tab> inst.text rootpw={{ user `ssh_password` }} inst.ks=hd:fd0:/ks.cfg <enter><wait>"
  ],
  "shutdown_command": "shutdown -P now",
  "shutdown_timeout": "120m"
  }
],

"provisioners": [  
  {
    "type": "file",
    "source": "script/",
    "destination": "/tmp"
  },
  {
    "type": "shell",
    "inline": [
      "chmod -R a+rx /tmp/linux && /tmp/linux/setEnvironmentVariables.sh"
    ],
	"environment_vars": [
      "proxy={{user `proxy`}}",
      "hostname={{ user `hostname` }}",
      "domainname={{user `dnsuffix`}}"
	  ]
  }
  ]
}